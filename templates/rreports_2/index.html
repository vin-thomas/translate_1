{%load static%}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dbtranslate</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
    <link href="{%static 'css/style.css'%}" rel="stylesheet" />
    <script src="{% static 'js/bootstrap.bundle.js' %}"></script>
  </head>
  <body>
    <header>
      <div class="end">
        <div><h1>dbtranslate</h1></div>
        {% if user.is_authenticated %}
            <div>Welcome {{ user.first_name }}</div>
            {% endif %}
          </div>
        </header>
    <main>
      <form
      id="translationForm"
        action="{% url 'rreports_2:index' %}"
        method="post"
        onsubmit="submitForm()"
        >
        {% csrf_token %}
        <textarea
        id="textToTranslate"
        name="textToTranslate"
        placeholder="Enter text with two blank lines after headlines and paragraphs">{{original_text}}</textarea>
        <div class="d-flex flex-row justify-content-center mb-3" style="position:relative;">
        <select name="language">
          <option value="ml">Malayalam</option>
          <option value="ta">Tamil</option>
          <option value="hi">Hindi</option>
          <option value="te">Telugu</option>
          <option value="mr">Marathi</option>
        </select>
        <div class="p-2"><input type="submit" value="Translate" /></div>
        <div class="p-2"><button type="button" onclick="closeForm()">Clear</button></div>
        {% if user.is_authenticated %}
        <!-- <a href="{% url 'users:logout' %}"> -->
        <div class="p-2"><button class="logout" onclick="logout()">Log out</button></div>
        <!-- </a> -->
        {% endif %}  
      </div> 
      </form>
      <p id="translationOutput">{{translation|safe}}</p>
      <div id="loader"></div>
    </main>

    <script>
      function closeForm() {
        document.getElementById("textToTranslate").value = "";
        document.getElementById("translationOutput").innerHTML = "";
      }

      function submitForm() {
        var loader = document.getElementById("loader");
        loader.style.visibility = "visible";
      }

      function logout(){
        fetch("{% url 'users:logout' %}")
      }
    </script>
  </body>
</html>
